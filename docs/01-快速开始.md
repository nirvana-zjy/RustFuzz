# å¿«é€Ÿå¼€å§‹æŒ‡å—

æ¬¢è¿ä½¿ç”¨ RustFuzzï¼æœ¬æŒ‡å—å°†å¸®åŠ©ä½ åœ¨ 10 åˆ†é’Ÿå†…å®Œæˆç¯å¢ƒé…ç½®å¹¶è¿è¡Œç¬¬ä¸€ä¸ª fuzz targetã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

- **æ“ä½œç³»ç»Ÿ**: Windows 10+, Linux, macOS
- **Python**: 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Rust**: æœ€æ–°ç¨³å®šç‰ˆæˆ– nightly ç‰ˆæœ¬
- **ç£ç›˜ç©ºé—´**: è‡³å°‘ 2GB å¯ç”¨ç©ºé—´

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šå®‰è£…ç¯å¢ƒ

### 1.1 å®‰è£… Rust å·¥å…·é“¾

å¦‚æœè¿˜æ²¡æœ‰å®‰è£… Rustï¼š

```bash
# Linux/Mac
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Windows
# è®¿é—® https://rustup.rs/ ä¸‹è½½å®‰è£…å™¨
```

éªŒè¯å®‰è£…ï¼š
```bash
rustc --version
cargo --version
```

### 1.2 å®‰è£… cargo-fuzz

```bash
cargo install cargo-fuzz
```

### 1.3 å®‰è£… RustFuzz

```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®åˆ°æœ¬åœ°
cd RustFuzz

# Windows ç”¨æˆ·
.\setup.ps1

# Linux/Mac ç”¨æˆ·
./setup.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥ Pythonã€Rustã€cargo-fuzz
- å®‰è£… Python ä¾èµ–
- åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿

## âš™ï¸ ç¬¬äºŒæ­¥ï¼šé…ç½® LLM

RustFuzz ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆä»£ç ï¼Œä½ éœ€è¦é…ç½® LLM APIã€‚

### é€‰é¡¹ Aï¼šä½¿ç”¨ OpenAIï¼ˆæ¨èï¼‰

ç¼–è¾‘ `config.toml`ï¼š

```toml
[llm]
openai_api_key = "sk-your-api-key-here"
openai_api_base = "https://api.openai.com/v1"
openai_model = "gpt-4"
use_ollama = false
```

### é€‰é¡¹ Bï¼šä½¿ç”¨æœ¬åœ° Ollama

```bash
# å®‰è£… Ollama
curl https://ollama.ai/install.sh | sh

# ä¸‹è½½æ¨¡å‹
ollama pull codellama:13b
```

ç¼–è¾‘ `config.toml`ï¼š

```toml
[llm]
use_ollama = true
ollama_host = "http://localhost:11434"
ollama_model = "codellama:13b"
```

## ğŸ“¦ ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç›®æ ‡åº“

ç¼–è¾‘ `libraries.toml`ï¼Œæ·»åŠ ä½ è¦æµ‹è¯•çš„ Rust crateï¼š

```toml
[my_crate]
language = "rust"
crate_path = "/path/to/your/crate"  # ä¿®æ”¹ä¸ºå®é™…è·¯å¾„
source_paths = ["src"]
output_path = "output/my_crate"
```

**ç¤ºä¾‹**ï¼ˆæµ‹è¯•æœ¬åœ°çš„ json è§£æåº“ï¼‰ï¼š

```toml
[my_json_parser]
language = "rust"
crate_path = "/home/user/projects/my-json-parser"
source_paths = ["src"]
output_path = "output/my_json_parser"
features = []
api_hints = ["parse() å‡½æ•°è§£æ JSON å­—ç¬¦ä¸²"]
```

## ğŸ¯ ç¬¬å››æ­¥ï¼šè¿è¡Œç¬¬ä¸€ä¸ªæµ‹è¯•

### 4.1 é¢„å¤„ç†ï¼ˆåˆ†æä»£ç ï¼‰

```bash
python RustFuzz.py preprocess -L my_crate
```

è¿™ä¼šåˆ†æä½ çš„ Rust ä»£ç ï¼Œæå–å‡½æ•°ã€ç»“æ„ä½“ç­‰ä¿¡æ¯ã€‚

**é¢„æœŸè¾“å‡º**ï¼š
```
âœ… åˆ†æå®Œæˆ
ğŸ“Š å‡½æ•°: 25
ğŸ“Š ç»“æ„ä½“: 8
ğŸ“Š æšä¸¾: 3
ğŸ“Š Unsafe å—: 2
```

### 4.2 ç”Ÿæˆ Fuzz Target

```bash
python RustFuzz.py generate -L my_crate --count 5
```

è¿™ä¼šç”Ÿæˆ 5 ä¸ª fuzz target æ–‡ä»¶ã€‚

**è¾“å‡ºä½ç½®**ï¼š`output/my_crate/fuzz_targets/`

### 4.3 è¿è¡Œ Fuzzing

```bash
python RustFuzz.py fuzz -L my_crate --timeout 300
```

è¿è¡Œ 5 åˆ†é’Ÿçš„ fuzzing æµ‹è¯•ã€‚

### 4.4 æŸ¥çœ‹ç»“æœ

```bash
# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯
python RustFuzz.py stats -L my_crate

# åˆ†æå´©æºƒ
python RustFuzz.py analyze -L my_crate
```

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼ä½ å·²ç»æˆåŠŸè¿è¡Œäº†ç¬¬ä¸€ä¸ª fuzzing æµ‹è¯•ã€‚

## ğŸ“ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æŸ¥çœ‹å¸®åŠ©
python RustFuzz.py --help
python RustFuzz.py <command> --help

# å®Œæ•´æµç¨‹
python RustFuzz.py preprocess -L <library>  # 1. åˆ†æä»£ç 
python RustFuzz.py generate -L <library>    # 2. ç”Ÿæˆ target
python RustFuzz.py fuzz -L <library>        # 3. è¿è¡Œ fuzzing
python RustFuzz.py analyze -L <library>     # 4. åˆ†æç»“æœ
```

## ğŸ” å¸¸è§é—®é¢˜

### Q: æ‰¾ä¸åˆ°åº“ï¼Ÿ
**A**: æ£€æŸ¥ `libraries.toml` ä¸­çš„ `crate_path` æ˜¯å¦æ­£ç¡®ï¼Œä½¿ç”¨ç»å¯¹è·¯å¾„ã€‚

### Q: LLM è¿æ¥å¤±è´¥ï¼Ÿ
**A**: 
- æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- å¦‚æœä½¿ç”¨ Ollamaï¼Œç¡®ä¿æœåŠ¡å·²å¯åŠ¨

### Q: ç”Ÿæˆçš„ä»£ç æ— æ³•ç¼–è¯‘ï¼Ÿ
**A**: 
- è¿™æ˜¯æ­£å¸¸çš„ï¼Œå¯èƒ½éœ€è¦æ‰‹åŠ¨è°ƒæ•´
- æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œæ•´
- å°è¯•å¢åŠ  `max_retries_per_target` é…ç½®

### Q: æ²¡æœ‰å‘ç°ä»»ä½•å´©æºƒï¼Ÿ
**A**:
- å¢åŠ è¿è¡Œæ—¶é—´ `--timeout 3600`
- ç”Ÿæˆæ›´å¤š target `--count 20`
- æä¾›åˆå§‹ç§å­æ–‡ä»¶

## ğŸ“š ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»æŒæ¡äº†åŸºç¡€ï¼Œå¯ä»¥ï¼š

1. **æ·±å…¥å­¦ä¹ **: é˜…è¯» [å®Œæ•´æ•™ç¨‹](02-å®Œæ•´æ•™ç¨‹.md) äº†è§£æ‰€æœ‰åŠŸèƒ½
2. **æŸ¥çœ‹ç¤ºä¾‹**: é˜…è¯» [ç®€å•ç¤ºä¾‹](03-ç®€å•ç¤ºä¾‹.md) å­¦ä¹ å®é™…æ¡ˆä¾‹
3. **æ—¥å¸¸ä½¿ç”¨**: ä½¿ç”¨ [å‘½ä»¤é€ŸæŸ¥æ‰‹å†Œ](04-å‘½ä»¤é€ŸæŸ¥.md) å¿«é€ŸæŸ¥æ‰¾å‘½ä»¤
4. **é«˜çº§å®šåˆ¶**: é˜…è¯» [æŠ€æœ¯è®¾è®¡æ–‡æ¡£](05-æŠ€æœ¯è®¾è®¡.md) äº†è§£åŸç†

## ğŸ’¡ ä½¿ç”¨å»ºè®®

- **ä»ç®€å•å¼€å§‹**: å…ˆæµ‹è¯•å°å‹åº“ï¼Œç†Ÿæ‚‰æµç¨‹
- **é€æ­¥æé«˜**: é€æ¸å¢åŠ å¤æ‚åº¦å’Œæµ‹è¯•æ—¶é—´
- **ä¿å­˜é…ç½®**: ä¸ºä¸åŒé¡¹ç›®åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶
- **å®šæœŸè¿è¡Œ**: å°† fuzzing é›†æˆåˆ° CI/CD æµç¨‹

## ğŸ†˜ è·å–å¸®åŠ©

- æŸ¥çœ‹ [å®Œæ•´æ•™ç¨‹](02-å®Œæ•´æ•™ç¨‹.md) çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
- æŸ¥çœ‹é¡¹ç›® `logs/` ç›®å½•ä¸­çš„æ—¥å¿—
- ä½¿ç”¨ `-D` é€‰é¡¹å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼š`python RustFuzz.py -D preprocess -L my_crate`
- æäº¤ Issue åˆ°é¡¹ç›®ä»“åº“

---

**å‡†å¤‡å¥½å¼€å§‹ä½ çš„ Rust æ¼æ´æŒ–æ˜ä¹‹æ—…äº†å—ï¼Ÿ** ğŸ¦€ğŸ”

ç»§ç»­é˜…è¯»å…¶ä»–æ–‡æ¡£ï¼Œæˆ–è€…ç›´æ¥å¼€å§‹æµ‹è¯•ä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼
