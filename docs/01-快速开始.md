# 快速开始指南

欢迎使用 RustFuzz！本指南将帮助你在 10 分钟内完成环境配置并运行第一个 fuzz target。

## 📋 前置要求

在开始之前，请确保你的系统满足以下要求：

- **操作系统**: Windows 10+, Linux, macOS
- **Python**: 3.10 或更高版本
- **Rust**: 最新稳定版或 nightly 版本
- **磁盘空间**: 至少 2GB 可用空间

## 🚀 第一步：安装环境

### 1.1 安装 Rust 工具链

如果还没有安装 Rust：

```bash
# Linux/Mac
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# Windows
# 访问 https://rustup.rs/ 下载安装器
```

验证安装：
```bash
rustc --version
cargo --version
```

### 1.2 安装 cargo-fuzz

```bash
cargo install cargo-fuzz
```

### 1.3 安装 RustFuzz

```bash
# 克隆或下载项目到本地
cd RustFuzz

# Windows 用户
.\setup.ps1

# Linux/Mac 用户
./setup.sh
```

安装脚本会自动：
- 检查 Python、Rust、cargo-fuzz
- 安装 Python 依赖
- 创建配置文件模板

## ⚙️ 第二步：配置 LLM

RustFuzz 使用大语言模型生成代码，你需要配置 LLM API。

### 选项 A：使用 OpenAI（推荐）

编辑 `config.toml`：

```toml
[llm]
openai_api_key = "sk-your-api-key-here"
openai_api_base = "https://api.openai.com/v1"
openai_model = "gpt-4"
use_ollama = false
```

### 选项 B：使用本地 Ollama

```bash
# 安装 Ollama
curl https://ollama.ai/install.sh | sh

# 下载模型
ollama pull codellama:13b
```

编辑 `config.toml`：

```toml
[llm]
use_ollama = true
ollama_host = "http://localhost:11434"
ollama_model = "codellama:13b"
```

## 📦 第三步：配置目标库

编辑 `libraries.toml`，添加你要测试的 Rust crate：

```toml
[my_crate]
language = "rust"
crate_path = "/path/to/your/crate"  # 修改为实际路径
source_paths = ["src"]
output_path = "output/my_crate"
```

**示例**（测试本地的 json 解析库）：

```toml
[my_json_parser]
language = "rust"
crate_path = "/home/user/projects/my-json-parser"
source_paths = ["src"]
output_path = "output/my_json_parser"
features = []
api_hints = ["parse() 函数解析 JSON 字符串"]
```

## 🎯 第四步：运行第一个测试

### 4.1 预处理（分析代码）

```bash
python RustFuzz.py preprocess -L my_crate
```

这会分析你的 Rust 代码，提取函数、结构体等信息。

**预期输出**：
```
✅ 分析完成
📊 函数: 25
📊 结构体: 8
📊 枚举: 3
📊 Unsafe 块: 2
```

### 4.2 生成 Fuzz Target

```bash
python RustFuzz.py generate -L my_crate --count 5
```

这会生成 5 个 fuzz target 文件。

**输出位置**：`output/my_crate/fuzz_targets/`

### 4.3 运行 Fuzzing

```bash
python RustFuzz.py fuzz -L my_crate --timeout 300
```

运行 5 分钟的 fuzzing 测试。

### 4.4 查看结果

```bash
# 查看统计信息
python RustFuzz.py stats -L my_crate

# 分析崩溃
python RustFuzz.py analyze -L my_crate
```

## 🎉 完成！

恭喜！你已经成功运行了第一个 fuzzing 测试。

## 📝 快速命令参考

```bash
# 查看帮助
python RustFuzz.py --help
python RustFuzz.py <command> --help

# 完整流程
python RustFuzz.py preprocess -L <library>  # 1. 分析代码
python RustFuzz.py generate -L <library>    # 2. 生成 target
python RustFuzz.py fuzz -L <library>        # 3. 运行 fuzzing
python RustFuzz.py analyze -L <library>     # 4. 分析结果
```

## 🔍 常见问题

### Q: 找不到库？
**A**: 检查 `libraries.toml` 中的 `crate_path` 是否正确，使用绝对路径。

### Q: LLM 连接失败？
**A**: 
- 检查 API Key 是否正确
- 检查网络连接
- 如果使用 Ollama，确保服务已启动

### Q: 生成的代码无法编译？
**A**: 
- 这是正常的，可能需要手动调整
- 检查依赖是否完整
- 尝试增加 `max_retries_per_target` 配置

### Q: 没有发现任何崩溃？
**A**:
- 增加运行时间 `--timeout 3600`
- 生成更多 target `--count 20`
- 提供初始种子文件

## 📚 下一步

现在你已经掌握了基础，可以：

1. **深入学习**: 阅读 [完整教程](02-完整教程.md) 了解所有功能
2. **查看示例**: 阅读 [简单示例](03-简单示例.md) 学习实际案例
3. **日常使用**: 使用 [命令速查手册](04-命令速查.md) 快速查找命令
4. **高级定制**: 阅读 [技术设计文档](05-技术设计.md) 了解原理

## 💡 使用建议

- **从简单开始**: 先测试小型库，熟悉流程
- **逐步提高**: 逐渐增加复杂度和测试时间
- **保存配置**: 为不同项目创建独立的配置文件
- **定期运行**: 将 fuzzing 集成到 CI/CD 流程

## 🆘 获取帮助

- 查看 [完整教程](02-完整教程.md) 的常见问题部分
- 查看项目 `logs/` 目录中的日志
- 使用 `-D` 选项启用调试模式：`python RustFuzz.py -D preprocess -L my_crate`
- 提交 Issue 到项目仓库

---

**准备好开始你的 Rust 漏洞挖掘之旅了吗？** 🦀🔍

继续阅读其他文档，或者直接开始测试你的第一个项目！
