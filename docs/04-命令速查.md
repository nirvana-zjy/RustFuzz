# RustFuzz å¿«é€Ÿå‚è€ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…
git clone <repository>
cd RustFuzz
pip install -r requirements.txt

# 2. é…ç½® (ç¼–è¾‘ config.toml å’Œ libraries.toml)
python RustFuzz.py configure --init

# 3. è¿è¡Œ
python RustFuzz.py preprocess -L <library>
python RustFuzz.py generate -L <library> --count 10
python RustFuzz.py fuzz -L <library>
```

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

### é…ç½®
```bash
python RustFuzz.py configure --init     # åˆå§‹åŒ–é…ç½®
```

### é¢„å¤„ç†
```bash
python RustFuzz.py preprocess -L lib    # åˆ†æä»£ç 
python RustFuzz.py preprocess -L lib --force  # å¼ºåˆ¶é‡æ–°åˆ†æ
```

### ç”Ÿæˆ
```bash
python RustFuzz.py generate -L lib --count 10              # ç”Ÿæˆ 10 ä¸ª
python RustFuzz.py generate -L lib --task allcover         # è¦†ç›–æ‰€æœ‰ API
python RustFuzz.py generate -L lib --functions "a,b,c"     # æŒ‡å®šå‡½æ•°
```

### Fuzzing
```bash
python RustFuzz.py fuzz -L lib                    # è¿è¡Œæ‰€æœ‰
python RustFuzz.py fuzz -L lib --target target_1  # è¿è¡Œç‰¹å®š target
python RustFuzz.py fuzz -L lib --timeout 3600     # 1å°æ—¶
python RustFuzz.py fuzz -L lib --jobs 4           # 4ä¸ªå¹¶è¡Œä»»åŠ¡
```

### åˆ†æ
```bash
python RustFuzz.py analyze -L lib         # åˆ†æ crash
python RustFuzz.py stats -L lib           # æ˜¾ç¤ºç»Ÿè®¡
python RustFuzz.py stats -L lib --coverage  # è¦†ç›–ç‡
```

## âš™ï¸ é…ç½®æ–‡ä»¶æ¨¡æ¿

### config.toml
```toml
[llm]
openai_api_key = "your-key"
openai_model = "gpt-4"

[preprocessor]
extract_test_cases = true
analyze_unsafe_blocks = true

[generator]
function_set_size = 3
max_rounds = 50
prioritize_unsafe = true

[fuzzer]
engine = "libfuzzer"
timeout = 3600
sanitizers = ["address"]
```

### libraries.toml
```toml
[your_crate]
language = "rust"
crate_path = "/path/to/crate"
source_paths = ["src"]
output_path = "output/your_crate"
features = []
api_hints = []
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Rust (nightly)
- cargo-fuzz
- LLVM/Clang

## ğŸ“ è¾“å‡ºç›®å½•ç»“æ„

```
output/your_crate/
â”œâ”€â”€ ast.json              # AST åˆ†æç»“æœ
â”œâ”€â”€ fuzz_targets/         # ç”Ÿæˆçš„ fuzz target
â”‚   â”œâ”€â”€ fuzz_target_1.rs
â”‚   â””â”€â”€ fuzz_target_2.rs
â”œâ”€â”€ fuzz_project/         # cargo-fuzz é¡¹ç›®
â”‚   â””â”€â”€ fuzz/
â”‚       â”œâ”€â”€ fuzz_targets/
â”‚       â”œâ”€â”€ corpus/
â”‚       â””â”€â”€ artifacts/
â””â”€â”€ crash_report.json     # Crash åˆ†ææŠ¥å‘Š
```

## ğŸ’¡ å¸¸è§ä»»åŠ¡

### æµ‹è¯•ç‰¹å®šå‡½æ•°
```bash
python RustFuzz.py generate -L lib --task given --functions "parse,process"
```

### é•¿æ—¶é—´ fuzzing
```bash
python RustFuzz.py fuzz -L lib --timeout 86400  # 24å°æ—¶
```

### ä½¿ç”¨æœ¬åœ° LLM
```toml
# config.toml
[llm]
use_ollama = true
ollama_model = "codellama:13b"
```

### æ‰‹åŠ¨ç¼–è¾‘ fuzz target
```bash
# ç”Ÿæˆåç¼–è¾‘
vim output/lib/fuzz_targets/fuzz_target_1.rs
# ç„¶åè¿è¡Œ
python RustFuzz.py fuzz -L lib --target fuzz_target_1
```

## ğŸ› è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
```bash
python RustFuzz.py -D preprocess -L lib  # -D å¯ç”¨ debug
```

### å¤ç° crash
```bash
cd output/lib/fuzz_project
cargo fuzz run target_1 artifacts/crash-xxx
```

### æœ€å°åŒ– crash è¾“å…¥
```bash
cargo fuzz cmin target_1  # æœ€å°åŒ– corpus
cargo fuzz tmin target_1 artifacts/crash-xxx  # æœ€å°åŒ–å•ä¸ªè¾“å…¥
```

## ğŸ“Š ç»“æœè§£è¯»

### ast.json
åŒ…å«ä»£ç ç»“æ„åˆ†æç»“æœï¼š
- functions: å‡½æ•°åˆ—è¡¨
- structs: ç»“æ„ä½“
- enums: æšä¸¾
- traits: Trait å®šä¹‰
- unsafe_blocks: Unsafe ä»£ç ä½ç½®

### crash_report.json
åŒ…å« crash ä¿¡æ¯ï¼š
- file: crash æ–‡ä»¶å
- path: å®Œæ•´è·¯å¾„
- size: è¾“å…¥å¤§å°

## ğŸ¯ æœ€ä½³å®è·µ

1. **ä»ç®€å•å¼€å§‹**: å…ˆæµ‹è¯•ç®€å•å‡½æ•°
2. **é€æ­¥å¢åŠ **: é€æ­¥æé«˜å¤æ‚åº¦
3. **é‡ç‚¹å…³æ³¨**: ä¼˜å…ˆæµ‹è¯• unsafe å’Œè§£æå‡½æ•°
4. **æŒç»­è¿è¡Œ**: é•¿æ—¶é—´ fuzzing æ•ˆæœæ›´å¥½
5. **å®šæœŸåˆ†æ**: åŠæ—¶æŸ¥çœ‹ç»“æœ

## ğŸ”— æ›´å¤šèµ„æº

- **è¯¦ç»†æ•™ç¨‹**: TUTORIAL.md
- **æŠ€æœ¯è®¾è®¡**: DESIGN.md
- **é¡¹ç›®æ€»ç»“**: PROJECT_SUMMARY.md
- **ç®€å•ç¤ºä¾‹**: examples/SIMPLE_EXAMPLE.md

## ğŸ’¬ å¸¸è§é—®é¢˜é€ŸæŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| ç¼–è¯‘å¤±è´¥ | æ£€æŸ¥ Cargo.toml ä¾èµ– |
| LLM è¶…æ—¶ | é™ä½ function_set_size |
| æ²¡å‘ç° crash | å¢åŠ è¿è¡Œæ—¶é—´æˆ–æä¾›ç§å­ |
| è¦†ç›–ç‡ä½ | ç”Ÿæˆæ›´å¤š fuzz target |
| å†…å­˜ä¸è¶³ | å‡å°‘å¹¶è¡Œä»»åŠ¡æ•° |

## ğŸ“ è·å–å¸®åŠ©

```bash
python RustFuzz.py --help              # æ€»ä½“å¸®åŠ©
python RustFuzz.py <command> --help    # å‘½ä»¤å¸®åŠ©
```

---

**æç¤º**: ä¿å­˜æ­¤æ–‡ä»¶ä»¥ä¾¿å¿«é€ŸæŸ¥é˜…å¸¸ç”¨å‘½ä»¤å’Œé…ç½®ï¼
